pipeline {
    agent any

    parameters {
        string(name: 'USER_NAME', defaultValue: '', description: 'Nom de l'utilisateur')
        string(name: 'MOIS', defaultValue: '', description: 'Mois sélectionné')
        string(name: 'JOUR', defaultValue: '', description: 'Jour sélectionné')
        string(name: 'US01', defaultValue: '0', description: 'US01 - Décrire ma journée une fois par semaine')
        string(name: 'US02', defaultValue: '0', description: 'US02 - Décrire ma journée 3 fois par semaine')
        string(name: 'US03', defaultValue: '0', description: 'US03 - Décrire toutes mes journées pendant 1 mois')
        string(name: 'US04', defaultValue: '0', description: 'US04 - Faire un moodboard sur Pinterest')
        string(name: 'US05', defaultValue: '0', description: 'US05 - Réaménager une pièce')
        string(name: 'US06', defaultValue: '0', description: 'US06 - Acheter et installer 3 éléments de décoration')
    }

    stages {
        stage('BUILD') {
            steps {
                echo "Nom: ${params.USER_NAME}"
                echo "Mois: ${params.MOIS}"
                echo "Jour: ${params.JOUR}"
            }
        }

        stage('JANVIER') {
            when {
                expression { params.MOIS == 'Janvier' }
            }
            steps {
                script {
                    if (params.US01 == '1') {
                        echo "Bravo pour avoir décrit ta journée une fois cette semaine !"
                    } else {
                        echo "Courage, tu vas y arriver !"
                    }

                    if (params.US02.toInteger() >= 3) {
                        echo "Bravo pour avoir décrit ta journée trois fois cette semaine !"
                    } else {
                        echo "Courage, tu vas y arriver !"
                    }

                    if (params.US03.toInteger() == 30) {
                        echo "Bravo pour avoir décrit toutes tes journées du mois !"
                    } else {
                        echo "Courage, tu vas y arriver !"
                    }
                }
            }
        }

        stage('FEVRIER') {
            when {
                expression { params.MOIS == 'Février' }
            }
            steps {
                script {
                    if (params.US04 == '1') {
                        echo "Bravo pour avoir fait un moodboard sur Pinterest !"
                    } else {
                        echo "Courage, tu vas y arriver !"
                    }

                    if (params.US05 == '1') {
                        echo "Bravo pour avoir réaménagé une pièce selon ton moodboard !"
                    } else {
                        echo "Courage, tu vas y arriver !"
                    }

                    if (params.US06.toInteger() >= 3) {
                        echo "Bravo pour avoir acheté et installé au moins trois éléments de décoration !"
                    } else {
                        echo "Courage, tu vas y arriver !"
                    }
                }
            }
        }
    }
}
